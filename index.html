<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Visor Geográfico</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/js/leaflet.css" />
    <script src="assets/js/leaflet.js"></script>
    <script src="assets/js/leaflet-src.esmap.js"></script>
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <!-- ========== START MOBILE HEADER ========== -->
    <div class="mobile-header d-lg-none">
      <div class="mobile-title-container">
        <h1>Visor Geográfico PAGA</h1>
        <p>Tramo K2+540 al K4+400 Armenia, Quindío</p>
      </div>
    </div>
    <!-- ========== END MOBILE HEADER ========== -->

    <!-- ========== MAIN APP CONTAINER ========== -->
    <div class="app-container">
      <!-- ========== SIDEBAR (Desktop) ========== -->
      <aside class="sidebar d-none d-lg-flex">
        <!-- Header fijo (igual que mobile) -->
        <div class="sidebar-header">
          <div class="brand-title-container">
            <h2 class="brand-title">Visor Geográfico PAGA</h2>
            <p class="brand-subtitle">
              Tramo K2+540 al K4+400 Armenia, Quindío
            </p>
          </div>
        </div>

        <!-- Contenido scrollable: Filtro + Capas -->
        <div class="sidebar-scrollable">
          <!-- Filtro -->
          <div class="block border mt-3">
            <div class="search-section">
              <strong>Filtrar</strong>
            </div>
            <div class="search-content">
              <div class="input-group">
                <input
                  id="layerSearchDesktop"
                  type="text"
                  class="form-control form-control-sm"
                  placeholder="Buscar capas..."
                />
                <button
                  id="btnSearchDesktop"
                  class="btn search-btn"
                  type="button"
                  aria-label="Buscar"
                >
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- START COMPONENTE DINAMICO GEOLOGIA-->

          <div class="block border mt-3">
            <div class="accordion" id="geologia-accordion">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#geologia-collapse"
                    aria-expanded="true"
                    aria-controls="geologia-collapse"
                  >
                    T_11_GEOLOGIA
                  </button>
                </h2>
                <div
                  id="geologia-collapse"
                  class="accordion-collapse collapse show"
                  data-bs-parent="#geologia-accordion"
                >
                  <div class="accordion-body">
                    <!-- start row Unidad Geologica-->
                    <div
                      class="layer-row"
                      data-layer-name="Dinamico - Agua - Superficial"
                    >
                      <div class="layer-name">Unidad Geologica</div>
                      <div>
                        <input
                          class="form-check-input layer-toggle"
                          type="checkbox"
                          data-layer-id="Btn_Unidad_Geologica"
                        />
                      </div>
                    </div>
                    <!-- end row for layers -->
                    <!-- start row for layers -->
                    <div
                      class="layer-row"
                      data-layer-name="Dinamico - Agua - Superficial"
                    >
                      <div class="layer-name">Unidad Geologica Superficial</div>
                      <div>
                        <input
                          class="form-check-input layer-toggle"
                          type="checkbox"
                          data-layer-id="Btn_Unidad_Geologica_Superficial"
                        />
                      </div>
                    </div>
                    <!-- end row for layers -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- END COMPONENTE DINAMICO GEOLOGIA -->

          <!-- START COMPONENTE DINAMICO GEOMORFOLOGIA -->

          <div class="block border mt-3">
            <div class="accordion" id="geomorfologia-accordion">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#geomorfologia-collapse"
                    aria-expanded="true"
                    aria-controls="geomorfologia-collapse"
                  >
                    T_12_GEOMORFOLOGIA
                  </button>
                </h2>
                <div
                  id="geomorfologia-collapse"
                  class="accordion-collapse collapse show"
                  data-bs-parent="#geomorfologia-accordion"
                >
                  <div class="accordion-body">
                    <!-- start row Unidad Geomorfologica IGAC-->
                    <div
                      class="layer-row"
                      data-layer-name="Dinamico - Agua - Superficial"
                    >
                      <div class="layer-name">Unidad Geomorfologica IGAC</div>
                      <div>
                        <input
                          class="form-check-input layer-toggle"
                          type="checkbox"
                          data-layer-id="Btn_Unidad_Geomorfologica_IGAC"
                        />
                      </div>
                    </div>
                    <!-- end row for layers -->
                    <!-- start row for layers -->
                    <div
                      class="layer-row"
                      data-layer-name="Dinamico - Agua - Superficial"
                    >
                      <div class="layer-name">Unidad Geomorfologica SGC</div>
                      <div>
                        <input
                          class="form-check-input layer-toggle"
                          type="checkbox"
                          data-layer-id="Btn_Unidad_Geomorfologica_SGC"
                        />
                      </div>
                    </div>
                    <!-- end row for layers -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- END COMPONENTE DINAMICO GEOMORFOLOGIA -->

          <!-- START COMPONENTE DINAMICO SUELOS-->

          <div class="block border mt-3">
            <div class="accordion" id="suelos-accordion">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#suelos-collapse"
                    aria-expanded="true"
                    aria-controls="suelos-collapse"
                  >
                    T_14_SUELOS
                  </button>
                </h2>
                <div
                  id="suelos-collapse"
                  class="accordion-collapse collapse show"
                  data-bs-parent="#suelos-accordion"
                >
                  <div class="accordion-body">
                    <!-- start row Capacidad Uso Tierra-->
                    <div
                      class="layer-row"
                      data-layer-name="Dinamico - Agua - Superficial"
                    >
                      <div class="layer-name">Capacidad Uso Tierra</div>
                      <div>
                        <input
                          class="form-check-input layer-toggle"
                          type="checkbox"
                          data-layer-id="Btn_Capacidad_Uso_Tierra"
                        />
                      </div>
                    </div>
                    <!-- end row for layers -->
                    <!-- start row for layers -->
                    <div
                      class="layer-row"
                      data-layer-name="Dinamico - Agua - Superficial"
                    >
                      <div class="layer-name">Suelo</div>
                      <div>
                        <input
                          class="form-check-input layer-toggle"
                          type="checkbox"
                          data-layer-id="Btn_Suelo"
                        />
                      </div>
                    </div>
                    <!-- end row for layers -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- END COMPONENTE DINAMICO SUELOS -->
        </div>

        <!-- Footer fijo del sidebar -->
        <div class="sidebar-footer">
          <div class="footer-row">
            <div class="footer-consorcio-text">CONSORCIO MEGAVIAS QUINDIO</div>
          </div>
          <div class="footer-row">
            <div class="footer-consorcio-logo">
              <img src="assets/img/consorcio.jpeg" alt="Consorcio" />
            </div>
          </div>
        </div>
      </aside>

      <!-- ========== OFFCANVAS (Mobile) ========== -->
      <div
        class="offcanvas offcanvas-start"
        tabindex="-1"
        id="offcanvasSidebar"
        aria-labelledby="offcanvasSidebarLabel"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasSidebarLabel">
            <i class="fas fa-layer-group me-2"></i>Capas Geográficas
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
            aria-label="Cerrar"
          ></button>
        </div>
        <div class="offcanvas-body">
          <!-- Filtrar móvil -->
          <div class="mb-3">
            <label class="form-label fw-bold">Filtrar capas</label>
            <div class="input-group">
              <input
                id="layerSearchMobile"
                type="text"
                class="form-control"
                placeholder="Buscar..."
              />
              <button id="btnSearchMobile" class="btn search-btn" type="button">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
          <!-- Accordion móvil -->
          <div id="mobileAccordionContainer"></div>
        </div>
      </div>

      <!-- ========== MAP CONTAINER ========== -->
      <main class="map-container">
        <div id="map">
          <!-- Contenedor personalizado para el zoom -->
          <div class="custom-zoom-container">
            <button class="zoom-in" title="Acercar">
              <i class="fas fa-plus"></i>
            </button>
            <button class="zoom-out" title="Alejar">
              <i class="fas fa-minus"></i>
            </button>
          </div>
        </div>
      </main>

      <!-- ========== MOBILE FLOATING BUTTON (Outside map, before footer) ========== -->
      <div class="mobile-floating-button-container d-lg-none">
        <div class="button-wrapper">
          <button
            class="btn btn-layers"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasSidebar"
            aria-controls="offcanvasSidebar"
          >
            <i class="fas fa-layer-group"></i>
            Capas
          </button>
        </div>
      </div>
    </div>

    <!-- ========== MOBILE FOOTER ========== -->
    <div class="mobile-footer d-lg-none">
      <div class="footer-row">
        <div class="footer-consorcio-text">CONSORCIO MEGAVIAS QUINDIO</div>
      </div>
      <div class="footer-row">
        <div class="footer-consorcio-logo">
          <img src="assets/img/consorcio.jpeg" alt="Consorcio" />
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/leaflet-src_map.js"></script>
  </body>
</html>
